1) 지금 우리가 개발하려는 것

갤럭시 A50 + ARCore 기반 데이터 수집 앱(MVP)

사용자가 Start 누르면 카메라 프레임을 **2fps(0.5초 간격)**로 샘플링해서 저장

각 샘플마다 **(이미지 프레임 + 그 프레임의 pose + intrinsics)**를 동일 프레임 기준으로 기록

Stop 누르면 수집 종료

화면은 사용자가 보는 뷰가 **저장되는 프레임과 같은 화폭(FOV)**이 되도록 카메라 비율 유지 + letterbox로 표시

목적: 나중에 모델에 넣을 때 “프레임과 그 프레임 파라미터”를 쌍으로 깔끔하게 쓰기.

2) 어떻게 개발할 건지 (가장 쉬운 루트)

ARCore 공식 샘플 레포 hello_ar_kotlin을 템플릿으로 사용해서, 필요한 부분만 최소로 추가한다.

베이스: google-ar/arcore-android-sdk → samples/hello_ar_kotlin

수정/추가할 핵심 3개:

Start/Stop 버튼 UI 추가

렌더 루프(session.update()로 Frame 받는 곳)에 2fps 샘플러를 붙임

샘플링 시점에만

frame.acquireCameraImage()로 이미지 획득(YUV)

JPEG로 파일 저장

같은 프레임의 pose, intrinsics를 파일로 저장(포맷은 단순하게, 후처리 가능)

화면 정책(방식 1):

카메라 스트림 비율을 기준으로 viewport를 잡고, 남는 영역은 검은 여백(letterbox) 처리

“앱에서 보는 화면”과 “저장되는 프레임의 화폭”을 최대한 동일하게 맞춤

3) 최소 기능 요구사항 (진짜 필요한 것만)
3.1 수집 제어

Start 버튼: 샘플링 시작

Stop 버튼: 샘플링 종료

3.2 프레임 샘플링

샘플링 주기: 0.5초(2fps)

기준: Frame.timestamp(ns) 기반 (시간차로 샘플링)

(권장) TrackingState.TRACKING일 때만 샘플 저장

3.3 저장 데이터(샘플 1개당)

이미지 프레임: JPEG 파일로 저장

원본 카메라 기준(landscape) 유지(회전 보정 안 함)

pose: 같은 프레임의 카메라 pose 저장

월드 좌표계 기준(+Y는 중력 반대) 그대로

intrinsics: 같은 프레임의 카메라 intrinsics 저장

fx, fy, cx, cy (필요 시 w,h도 같이)

포맷은 단순히 저장만 되면 됨(후처리로 바꿔도 OK)

3.4 화면 표시 정책(방식 1)

카메라 비율 유지 + letterbox

“저장되는 프레임 화폭”과 최대한 동일하게 보이게


쓸만한 api

템플릿: hello_ar_kotlin 


API:

Session.update() / Frame.timestamp

frame.camera.pose (Pose) 


frame.camera.imageIntrinsics (CameraIntrinsics) 


frame.acquireCameraImage() → YUV_420_888 


저장:

YUV → (NV21 변환) → YuvImage.compressToJpeg() 


화면:

BackgroundRenderer 기반으로 viewport를 카메라 비율로 고정(레터박스) 
